import{q as h,n as V,m as q,j as U,k as L,g as B,b as Z,h as j,_hW as O}from"./q-B9R08C_P.js";import{J as K,_ as m}from"./q-L4XZ6hCu.js";var X=Object.defineProperty,Y=(t,e,i)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,x=(t,e,i)=>Y(t,typeof e!="symbol"?e+"":e,i);class Pe extends Error{constructor(e,i){super(typeof e=="string"?e:""),x(this,"name","FormError"),x(this,"errors"),this.errors=typeof e=="string"?i||{}:e}}function ke(t,e){return K(h(()=>m(()=>import("./q-Drh5rSag.js"),[]),"s_gjcHf0ES4W4",[t,e]),{id:t.getHash()})}function De(t){return h(()=>m(()=>import("./q-F-SvkNZf.js"),[]),"s_yASmZ7iC60w",[t])}function J(t,e,i){const{checked:n,files:r,options:s,value:l,valueAsDate:a,valueAsNumber:u}=t;return!i||i==="string"?l:i==="string[]"?s?[...s].filter(o=>o.selected&&!o.disabled).map(o=>o.value):n?[...e.value||[],l]:(e.value||[]).filter(o=>o!==l):i==="number"?u:i==="boolean"?n:i==="File"&&r?V(r[0]):i==="File[]"&&r?[...r].map(o=>V(o)):i==="Date"&&a?a:e.value}function S(t){return[...Object.values(t.internal.fields),...Object.values(t.internal.fieldArrays)]}function A(t,e){return t.internal.fieldArrays[e]}function G(t,e){return+e.replace(`${t}.`,"").split(".")[0]}function z(t,e){C(t,!1).forEach(i=>{const n=A(t,i).items.length-1;e.filter(r=>r.startsWith(`${i}.`)&&G(i,r)>n).forEach(r=>{e.splice(e.indexOf(r),1)})})}function C(t,e=!0){const i=Object.keys(t.internal.fieldArrays);return e&&z(t,i),i}function ee(t,e=!0){const i=Object.keys(t.internal.fields);return e&&z(t,i),i}function b(t,e){return t.internal.fields[e]}function P(t,e,i){const n=ee(t,i),r=C(t,i);return typeof e=="string"||Array.isArray(e)?(typeof e=="string"?[e]:e).reduce((s,l)=>{const[a,u]=s;return r.includes(l)?(r.forEach(o=>{o.startsWith(l)&&u.add(o)}),n.forEach(o=>{o.startsWith(l)&&a.add(o)})):a.add(l),s},[new Set,new Set]).map(s=>[...s]):[n,r]}function te(t,{items:e,initialItems:i,error:n}={items:[],initialItems:[],error:""}){const r=i.join()!==e.join();return{internal:{initialItems:[...i],startItems:[...i],validate:[],validateOn:void 0,revalidateOn:void 0,consumers:[]},name:t,items:e,error:n,active:!1,touched:r,dirty:r}}function $(t,e){const i=n=>n instanceof Blob?n.size:n;return Array.isArray(t)&&Array.isArray(e)?t.map(i).join()!==e.map(i).join():t instanceof Date&&e instanceof Date?t.getTime()!==e.getTime():Number.isNaN(t)&&Number.isNaN(e)?!1:t!==e}function ie(t,{value:e,initialValue:i,error:n}={value:void 0,initialValue:void 0,error:""}){const r=$(i,e);return{internal:{initialValue:i,startValue:i,validate:[],validateOn:void 0,revalidateOn:void 0,transform:[],elements:[],consumers:[]},name:t,value:e,error:n,active:!1,touched:r,dirty:r}}function I(t,e){return t.split(".").reduce((i,n)=>i==null?void 0:i[n],e)}let ne=0;function k(){return ne++}function re({loader:t,action:e,fieldArrays:i}){function n(a){var u;return((u=e==null?void 0:e.value)==null?void 0:u.values)&&I(a,e.value.values)}const r=()=>k(),s=a=>{var u;return((u=e==null?void 0:e.value)==null?void 0:u.errors[a])||""},l=(a,u,o)=>Object.entries(u).reduce((v,[f,c])=>{var y;const d=o?`${o}.${f}`:f;if(i!=null&&i.includes(d.replace(/.\d+./g,".$."))){const p=c.map(r);v[1][d]=te(d,{initialItems:p,items:((y=n(d))==null?void 0:y.map(r))||[...p],error:s(d)})}else(!c||typeof c!="object"||Array.isArray(c)||c instanceof Date)&&(v[0][d]=ie(d,{initialValue:c,value:n(d)??c,error:s(d)}));return c&&typeof c=="object"&&l(v,c,d),v},a);return l([{},{}],t.value)}async function Te(t,e){const i=await t.resolve();return(typeof i=="function"?i():i).safeParseAsync(e)}function D(t,e){return(typeof t!="string"&&!Array.isArray(t)?t:e)||{}}function se(t,e){t.dirty=e||S(t).some(i=>i.active&&i.dirty)}function ae(t,e){const i=$(e.internal.startValue,e.value);i!==e.dirty&&(e.dirty=i,se(t,i))}function W(t,e){var i,n;(n=(i=b(t,e))==null?void 0:i.internal.elements[0])==null||n.focus()}function oe(t,e,i,{shouldActive:n=!0,shouldTouched:r=!1,shouldDirty:s=!1,shouldFocus:l=!!i}={}){for(const a of[b(t,e),A(t,e)])a&&(!n||a.active)&&(!r||a.touched)&&(!s||a.dirty)&&(a.error=i,i&&"value"in a&&l&&W(t,e));H(t,!!i)}function le(t,e,i){const{shouldActive:n=!0,shouldTouched:r=!1,shouldDirty:s=!1,shouldValid:l=!1}=D(e,i);return P(t,e)[0].reduce((a,u)=>{const o=b(t,u);return(!n||o.active)&&(!r||o.touched)&&(!s||o.dirty)&&(!l||!o.error)&&(typeof e=="string"?u.replace(`${e}.`,""):u).split(".").reduce((v,f,c,d)=>v[f]=c===d.length-1?o.value:typeof v[f]=="object"&&v[f]||(isNaN(+d[c+1])?{}:[]),a),a},typeof e=="string"?[]:{})}function Ne(t,e,i){const[n,r]=P(t,e,!1),s=typeof e=="string"&&n.length===1,l=!s&&!Array.isArray(e),a=D(e,i),{initialValue:u,initialValues:o,keepResponse:v=!1,keepSubmitCount:f=!1,keepSubmitted:c=!1,keepValues:d=!1,keepDirtyValues:y=!1,keepItems:p=!1,keepDirtyItems:Q=!1,keepErrors:N=!1,keepTouched:R=!1,keepDirty:w=!1}=a;n.forEach(E=>{const _=b(t,E);(s?"initialValue"in a:o)&&(_.internal.initialValue=s?u:I(E,o));const g=y&&_.dirty;!d&&!g&&(_.internal.startValue=_.internal.initialValue,_.value=_.internal.initialValue,_.internal.elements.forEach(F=>{F.type==="file"&&(F.value="")})),R||(_.touched=!1),!w&&!d&&!g&&(_.dirty=!1),N||(_.error="")}),r.forEach(E=>{var F;const _=A(t,E),g=Q&&_.dirty;!p&&!g&&(o&&(_.internal.initialItems=((F=I(E,o))==null?void 0:F.map(()=>k()))||[]),_.internal.startItems=[..._.internal.initialItems],_.items=[..._.internal.initialItems]),R||(_.touched=!1),!w&&!p&&!g&&(_.dirty=!1),N||(_.error="")}),l&&(v||(t.response={}),f||(t.submitCount=0),c||(t.submitted=!1)),_e(t)}function ce(t,e,{duration:i}={}){t.response=e,i&&setTimeout(()=>{t.response===e&&(t.response={})},i)}async function ue(t,e,i){const[n,r]=P(t,e),{shouldActive:s=!0,shouldFocus:l=!0}=D(e,i),a=k();t.internal.validators.push(a),t.validating=!0;const u=t.internal.validate?await t.internal.validate(le(t,{shouldActive:s})):{};let o=typeof e!="string"&&!Array.isArray(e)?!Object.keys(u).length:!0;const[v]=await Promise.all([Promise.all(n.map(async f=>{const c=b(t,f);if(!s||c.active){let d;for(const p of c.internal.validate)if(d=await p(c.value),d)break;const y=d||u[f]||"";return y&&(o=!1),c.error=y,y?f:null}})),Promise.all(r.map(async f=>{const c=A(t,f);if(!s||c.active){let d="";for(const p of c.internal.validate)if(d=await p(c.items),d)break;const y=d||u[f]||"";y&&(o=!1),c.error=y}}))]);if(fe(t,u,{shouldActive:s}),l){const f=v.find(c=>c);f&&W(t,f)}return H(t,!o),t.internal.validators.splice(t.internal.validators.indexOf(a),1),t.internal.validators.length||(t.validating=!1),o}function de(t,e,i,{on:n,shouldFocus:r=!1}){const s=e.internal.validateOn??t.internal.validateOn,l=e.internal.revalidateOn??t.internal.revalidateOn;n.includes((s==="submit"?t.submitted:e.error)?l:s)&&ue(t,i,{shouldFocus:r})}async function T(t,e,i,n,r,s,l){l!==void 0&&(e.value=l);for(const a of e.internal.transform)e.value=await a(e.value,n,r);e.touched=!0,t.touched=!0,ae(t,e),de(t,e,i,{on:s})}function fe(t,e,{duration:i,shouldActive:n=!0}){const r=Object.entries(e).reduce((s,[l,a])=>([b(t,l),A(t,l)].every(u=>!u||n&&!u.active)&&s.push(a),s),[]).join(" ");r&&ce(t,{status:"error",message:r},{duration:i})}function Re(t,e,i){Object.entries(e).forEach(([n,r])=>{r&&oe(t,n,r,{...i,shouldFocus:!1})})}function H(t,e){t.invalid=e||S(t).some(i=>i.active&&i.error)}function _e(t){let e=!1,i=!1,n=!1;for(const r of S(t))if(r.active&&(r.touched&&(e=!0),r.dirty&&(i=!0),r.error&&(n=!0)),e&&i&&n)break;t.touched=e,t.dirty=i,t.invalid=n}function M(t,e,i){return Z(h(()=>m(()=>import("./q-HxzYe6es.js").then(n=>n.i),[]),"s_l12nEnCRwno"))(t,e,i)}function ve({children:t,name:e,type:i,...n}){const{of:r}=n,s=b(r,e);return q(M,{store:s,...n,children:t(s,{name:e,autoFocus:!1,ref:h(()=>m(()=>Promise.resolve().then(()=>Ee),void 0),"s_FHUK0Y3cQjk",[s]),onInput$:h(()=>m(()=>Promise.resolve().then(()=>Fe),void 0),"s_nt0DvCkEBpc",[s,r,e,i]),onChange$:h(()=>m(()=>Promise.resolve().then(()=>Oe),void 0),"s_TtD7HiZRsqA",[s,r,e]),onBlur$:h(()=>m(()=>Promise.resolve().then(()=>be),void 0),"s_ITX7R0WgLjU",[s,r,e])})},0,e)}function ye({children:t,name:e,...i}){const n=A(i.of,e);return q(M,{store:n,...i,children:t(n)},0,e)}function pe({of:t,action:e,onSubmit$:i,responseDuration:n,keepResponse:r,shouldActive:s,shouldTouched:l,shouldDirty:a,shouldFocus:u,reloadDocument:o,children:v,...f}){const{encType:c}=f,d={duration:n,shouldActive:s,shouldTouched:l,shouldDirty:a,shouldFocus:u};return U("form",{noValidate:!0,...f,method:"post",action:e==null?void 0:e.actionPath,"preventdefault:submit":!o,ref:y=>{t.element=y},children:v,onSubmit$:h(()=>m(()=>import("./q-fzlGhB_2.js"),[]),"s_80fZ79zbzcs",[e,c,t,r,i,d,o])},{noValidate:L,method:L},0,"Lk_1")}function he({validate:t,validateOn:e="submit",revalidateOn:i="input",...n}){return B(()=>{var l,a;const[r,s]=re(n);return{internal:{fields:r,fieldArrays:s,fieldArrayPaths:n.fieldArrays,validate:t,validators:[],validateOn:e,revalidateOn:i},element:void 0,submitCount:0,submitting:!1,submitted:!1,validating:!1,touched:!1,dirty:!1,invalid:!1,response:((a=(l=n.action)==null?void 0:l.value)==null?void 0:a.response)||{}}})}function we(t){const e=he(t);return[e,{Form:i=>pe({of:e,action:t.action,...i}),Field:i=>ve({of:e,...i}),FieldArray:i=>ye({of:e,...i})}]}const me=(t,e)=>{const[i,n,r]=j();T(n,i,r,t,e,["touched","blur"])},be=Object.freeze(Object.defineProperty({__proto__:null,_hW:O,s_ITX7R0WgLjU:me},Symbol.toStringTag,{value:"Module"})),Ae=t=>{const[e]=j();e.internal.elements.push(t)},Ee=Object.freeze(Object.defineProperty({__proto__:null,_hW:O,s_FHUK0Y3cQjk:Ae},Symbol.toStringTag,{value:"Module"})),ge=(t,e)=>{const[i,n,r,s]=j();T(n,i,r,t,e,["touched","input"],J(e,i,s))},Fe=Object.freeze(Object.defineProperty({__proto__:null,_hW:O,s_nt0DvCkEBpc:ge},Symbol.toStringTag,{value:"Module"})),je=(t,e)=>{const[i,n,r]=j();T(n,i,r,t,e,["change"])},Oe=Object.freeze(Object.defineProperty({__proto__:null,_hW:O,s_TtD7HiZRsqA:je},Symbol.toStringTag,{value:"Module"}));export{Pe as F,O as _hW,ce as a,fe as b,k as c,Te as d,De as e,ke as f,le as g,we as h,Ae as i,ge as j,je as k,Ne as r,Re as s,me as s_ITX7R0WgLjU,_e as u,ue as v};
